<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music & Dance - ShaktiNavam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Laila:wght@400;700&family=Teko:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gold: #FFD700;
            --secondary-gold: #f7b600;
            --royal-purple: #4B0082;
            --deep-red: #8B0000;
            --royal-indigo: #240046;
            --dark-bg: #10002b;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Laila', serif;
            background-color: var(--dark-bg);
            color: #f0f0f0;
            overflow-x: hidden;
        }
        h1, h2, h3, h4 {
            font-family: 'Teko', sans-serif;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }
        .navbar {
            background: rgba(16, 0, 43, 0.7);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--primary-gold);
        }
        .nav-link {
            position: relative;
            color: #f0f0f0;
            transition: color 0.3s;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--primary-gold);
            transition: width 0.3s;
        }
        .nav-link:hover {
            color: var(--primary-gold);
            text-shadow: 0 0 5px var(--primary-gold);
        }
        .nav-link:hover::after {
            width: 100%;
        }
        .section-container {
            padding-top: 8rem; 
            padding-bottom: 5rem;
        }
        .section-title {
            font-size: 4rem;
            color: var(--primary-gold);
            text-align: center;
            margin-bottom: 3rem;
            text-transform: uppercase;
            text-shadow: 0 0 15px var(--primary-gold);
        }
        .content-card {
            background-color: rgba(36, 0, 70, 0.5);
            border: 1px solid var(--royal-purple);
            border-radius: 15px;
            padding: 2.5rem;
            margin-bottom: 2.5rem;
            transition: transform 0.5s, box-shadow 0.5s, opacity 0.5s;
            opacity: 0;
            transform: translateY(30px);
        }
        .content-card.is-visible {
             opacity: 1;
             transform: translateY(0);
        }
        .content-card h3 {
            font-size: 2.8rem;
            color: var(--secondary-gold);
            border-bottom: 2px solid var(--primary-gold);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        /* Audio Player & Visualizer */
        .audio-player-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }
        #visualizer {
            width: 100%;
            height: 150px;
            background-color: rgba(16,0,43,0.5);
            border-radius: 8px;
            border: 1px solid var(--royal-purple);
        }
        .audio-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            background-color: var(--royal-indigo);
            padding: 1rem;
            border-radius: 12px;
        }
        .audio-controls button {
            background-color: var(--primary-gold);
            color: var(--dark-bg);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .audio-controls button:hover {
            transform: scale(1.1);
            background-color: var(--secondary-gold);
        }
        #playlist {
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        #playlist button {
            display: block;
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background: transparent;
            border: 1px solid var(--royal-purple);
            color: #f0f0f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        #playlist button:hover, #playlist button.active {
            background-color: var(--royal-purple);
            color: var(--primary-gold);
        }
        #now-playing {
            font-family: 'Teko', sans-serif;
            font-size: 1.5rem;
            color: var(--primary-gold);
        }

        /* Dance Section */
        .dance-card {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            align-items: center;
            margin-bottom: 2rem;
        }
        @media (min-width: 1024px) {
            .dance-card {
                grid-template-columns: 1fr 1fr;
            }
        }
        .dance-card iframe {
            width: 100%;
            aspect-ratio: 16 / 9;
            border-radius: 10px;
            border: 2px solid var(--primary-gold);
        }
        .dance-card h4 {
            font-size: 2.2rem;
            color: var(--primary-gold);
            margin-bottom: 1rem;
        }
        
        /* Interactive Dance Animation */
        #dance-animation-container {
            background-color: rgba(16,0,43,0.5);
            border: 1px solid var(--royal-purple);
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
        }
        #dance-canvas {
            background: url('https://www.transparenttextures.com/patterns/dark-matter.png');
            border-radius: 8px;
        }


        /* Footer */
        .footer-icon svg { width: 32px; height: 32px; transition: all 0.3s ease; }
        .footer-icon:hover svg { color: var(--primary-gold); transform: scale(1.2); }
    </style>
</head>
<body>

    <!-- Navbar -->
    <nav id="navbar" class="navbar fixed top-0 left-0 right-0 z-50 p-4">
        <div class="container mx-auto flex justify-between items-center">
            <a href="index.html" class="text-3xl font-bold text-yellow-400 font-['Teko']">ShaktiNavam</a>
            <div class="hidden md:flex space-x-6">
                <a href="index.html" class="nav-link">Home</a>
                <a href="planner.html" class="nav-link">Tour Planner</a>
                <a href="know_more.html" class="nav-link">Know More</a>
                <a href="gallery.html" class="nav-link">Gallery</a>
                <a href="quiz.html" class="nav-link">Quiz</a>
            </div>
             <button id="menu-btn" class="md:hidden text-2xl text-white">☰</button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden p-4 space-y-2"></div>
    </nav>

    <div class="container mx-auto px-4">
        <section id="music-dance" class="section-container">
            <h2 class="section-title">Rhythms of Royalty</h2>
            
            <div class="max-w-6xl mx-auto">

                <!-- Traditional Music Section -->
                <div class="content-card">
                    <h3>The Echoes of Tradition</h3>
                    <p class="text-center mb-6">Immerse yourself in the divine sounds of Dasara. From the powerful resonance of the Nadaswaram to the intricate melodies of classical compositions, this is the music that forms the festival's very soul.</p>
                    <div class="audio-player-container">
                        <canvas id="visualizer"></canvas>
                        <div id="now-playing">Select a track to play</div>
                        <div class="audio-controls">
                            <button id="prev-btn">⏮</button>
                            <button id="play-pause-btn">▶</button>
                            <button id="next-btn">⏭</button>
                        </div>
                        <div id="playlist">
                            <!-- Playlist buttons will be added by JS -->
                        </div>
                        <audio id="audio-player" crossorigin="anonymous"></audio>
                    </div>
                </div>

                <!-- Folk Dance Section -->
                <div class="content-card">
                    <h3>The Spectacle of Dance</h3>
                    <p class="mb-8">Dasara is a canvas for Karnataka's rich tapestry of dance. These performances are not just entertainment; they are stories, prayers, and celebrations brought to life through energetic movements and vibrant costumes.</p>

                    <div class="dance-card">
                        <div>
                            <h4>Bharatanatyam - Mysuru Style</h4>
                            <p>The Mysuru style of Bharatanatyam is a graceful and profound classical art form nurtured by the Wadiyar dynasty. It emphasizes subtle expressions (*abhinaya*), intricate footwork (*nritta*), and devotional storytelling, creating a performance that is both technically brilliant and spiritually uplifting.</p>
                        </div>
                        <div>
                            <iframe src="https://www.youtube.com/embed/1n72D_g2_2E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    </div>

                     <div class="dance-card">
                        <div>
                             <h4>Dollu Kunitha - The Drum Dance</h4>
                            <p>A powerful and dynamic group dance performed by men of the Kuruba community. The dancers use large, decorated drums to create a thunderous rhythm, performing acrobatic feats and synchronized movements that celebrate their deity, Beereshwara.</p>
                        </div>
                        <div>
                             <iframe src="https://www.youtube.com/embed/g2-i2a5c-7E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    </div>
                </div>

                <!-- Interactive Dance Animation -->
                <div class="content-card">
                    <h3>Learn a Step: The Mysuru Style</h3>
                    <p class="text-center mb-6">Discover the grace of the Mysuru style of Bharatanatyam. Follow the steps below to learn the foundational posture, then watch our animated dancer bring the movement to life!</p>
                    
                    <div class="max-w-md mx-auto mb-6 text-left">
                        <h4 class="font-bold text-xl text-secondary-gold mb-3">Follow these steps for the Basic Stance (Araimandi):</h4>
                        <ol class="list-decimal list-inside space-y-2 text-lg">
                            <li><strong>Starting Position:</strong> Stand straight with your feet together (this is called Samapada).</li>
                            <li><strong>Turn Out Feet:</strong> Keeping your heels together, turn your feet outwards to form a wide 'V' shape.</li>
                            <li><strong>Bend Knees (Araimandi):</strong> Keeping your back straight, bend your knees outwards over your toes into a half-sitting posture.</li>
                            <li><strong>Arm Position:</strong> Extend your arms out to the sides at shoulder level, with elbows slightly bent and palms facing down.</li>
                            <li><strong>Hold the Pose:</strong> This graceful posture is the starting point for almost every move in Bharatanatyam!</li>
                        </ol>
                    </div>

                    <div id="dance-animation-container" class="flex flex-col items-center">
                        <canvas id="dance-canvas" width="300" height="300"></canvas>
                        <div class="audio-controls mt-4">
                            <button id="dance-play-pause-btn">▶</button>
                            <button id="dance-slow-mo-btn">Slow</button>
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </div>

    <!-- Footer -->
     <footer class="bg-opacity-50 bg-royal-indigo text-center py-8 border-t-2 border-primary-gold/30">
        <div class="container mx-auto px-4">
            <div class="flex justify-center space-x-8 mb-6">
                 <a href="#" target="_blank" class="footer-icon text-gray-400"><span class="sr-only">Instagram</span><svg fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.316 1.363.364 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.316-2.427.364-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.316-1.363-.364-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049 1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.345 2.525c.636-.247 1.363-.316 2.427-.364C9.79 2.013 10.144 2 12.315 2zM8.447 12.315c0-2.178 1.76-3.938 3.938-3.938s3.938 1.76 3.938 3.938-1.76 3.938-3.938 3.938-3.938-1.76-3.938-3.938zm9.524-5.32c-.622 0-1.125.503-1.125 1.125s.503 1.125 1.125 1.125 1.125-.503 1.125-1.125-.503-1.125-1.125-1.125z" clip-rule="evenodd" /></svg></a>
                <a href="#" target="_blank" class="footer-icon text-gray-400"><span class="sr-only">Facebook</span><svg fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg></a>
                <a href="tel:+910000000000" class="footer-icon text-gray-400"><span class="sr-only">Phone</span><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg></a>
            </div>
            <p class="text-gray-400 text-sm">&copy; 2025 ShaktiNavam. All Rights Reserved.</p>
            <p class="text-primary-gold text-md mt-2 tracking-wider">Designed & Created by ChethanUrs</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Get CSS Colors for Canvas ---
        const computedStyles = getComputedStyle(document.documentElement);
        const primaryGold = computedStyles.getPropertyValue('--primary-gold').trim();
        const royalPurple = computedStyles.getPropertyValue('--royal-purple').trim();
        const deepRed = computedStyles.getPropertyValue('--deep-red').trim();

        // --- Navbar Logic ---
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const navLinksContainer = document.querySelector('.hidden.md\\:flex.space-x-6');
        if (navLinksContainer) {
            mobileMenu.innerHTML = navLinksContainer.innerHTML;
        }
        menuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // --- Scroll Animation ---
        const animatedCards = document.querySelectorAll('.content-card');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        animatedCards.forEach(card => observer.observe(card));

        // --- Audio Player & Visualizer Logic ---
        const audioPlayer = document.getElementById('audio-player');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nowPlaying = document.getElementById('now-playing');
        const playlistContainer = document.getElementById('playlist');
        const visualizerCanvas = document.getElementById('visualizer');
        const canvasCtx = visualizerCanvas.getContext('2d');
        
        const playlist = [
            { name: "Nadaswaram Ensemble", url: "https://github.com/ChethanUrs/ShaktiNavam-/raw/4581db6ce1f2d818886cb06f75838a97e8a60023/WhatsApp%20Audio%202025-09-06%20at%2013.50.08_5a9b9ca4.mp3" },
            { name: "Traditional Veena Melody", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" },
            { name: "Folk Rhythm Beat", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" },
        ];
        let currentTrackIndex = 0;
        let audioContext, analyser, source, dataArray, bufferLength;
        let isAudioContextInit = false;

        function initAudioContext() {
            if (isAudioContextInit) return;
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioContext.createAnalyser();
            source = audioContext.createMediaElementSource(audioPlayer);
            source.connect(analyser);
            analyser.connect(audioContext.destination);
            analyser.fftSize = 256;
            bufferLength = analyser.frequencyBinCount;
            dataArray = new Uint8Array(bufferLength);
            isAudioContextInit = true;
        }

        function loadTrack(index) {
            currentTrackIndex = index;
            audioPlayer.src = playlist[index].url;
            nowPlaying.textContent = `Now Playing: ${playlist[index].name}`;
            updatePlaylistUI();
        }
        
        function updatePlaylistUI() {
            document.querySelectorAll('#playlist button').forEach((btn, idx) => {
                btn.classList.toggle('active', idx === currentTrackIndex);
            });
        }

        playlist.forEach((track, index) => {
            const button = document.createElement('button');
            button.textContent = track.name;
            button.addEventListener('click', () => {
                loadTrack(index);
                playAudio();
            });
            playlistContainer.appendChild(button);
        });

        function playAudio() {
            if (!isAudioContextInit) initAudioContext();
            audioPlayer.play().catch(e => console.error("Audio playback failed:", e));
            playPauseBtn.textContent = '❚❚';
            drawVisualizer();
        }
        function pauseAudio() {
            audioPlayer.pause();
            playPauseBtn.textContent = '▶';
        }

        playPauseBtn.addEventListener('click', () => {
            if (audioPlayer.paused) playAudio();
            else pauseAudio();
        });
        
        nextBtn.addEventListener('click', () => {
            loadTrack((currentTrackIndex + 1) % playlist.length);
            playAudio();
        });

        prevBtn.addEventListener('click', () => {
            loadTrack((currentTrackIndex - 1 + playlist.length) % playlist.length);
            playAudio();
        });
        
        audioPlayer.addEventListener('ended', () => {
             nextBtn.click();
        });

        function drawVisualizer() {
            if (!isAudioContextInit || audioPlayer.paused) {
                canvasCtx.fillStyle = 'rgba(16, 0, 43, 0.5)';
                canvasCtx.fillRect(0, 0, visualizerCanvas.width, visualizerCanvas.height);
                return;
            };
            requestAnimationFrame(drawVisualizer);
            analyser.getByteFrequencyData(dataArray);
            
            canvasCtx.fillStyle = 'rgba(16, 0, 43, 0.5)';
            canvasCtx.fillRect(0, 0, visualizerCanvas.width, visualizerCanvas.height);
            
            const barWidth = (visualizerCanvas.width / bufferLength) * 2.5;
            let barHeight;
            let x = 0;
            
            for(let i = 0; i < bufferLength; i++) {
                barHeight = dataArray[i] / 2;
                const gradient = canvasCtx.createLinearGradient(0, visualizerCanvas.height, 0, visualizerCanvas.height - barHeight);
                gradient.addColorStop(0, royalPurple);
                gradient.addColorStop(1, primaryGold);
                
                canvasCtx.fillStyle = gradient;
                canvasCtx.fillRect(x, visualizerCanvas.height - barHeight, barWidth, barHeight);
                x += barWidth + 1;
            }
        }
        loadTrack(0);

        // --- Interactive Dance Animation Logic ---
        const danceCanvas = document.getElementById('dance-canvas');
        const danceCtx = danceCanvas.getContext('2d');
        const dancePlayBtn = document.getElementById('dance-play-pause-btn');
        const slowMoBtn = document.getElementById('dance-slow-mo-btn');

        let isDancing = false;
        let frame = 0;
        let animationSpeed = 8; // Slower is higher

        function drawDancer(pose) {
            const { torso, head, arms, legs } = pose;
            danceCtx.clearRect(0, 0, 300, 300);
            danceCtx.strokeStyle = primaryGold;
            danceCtx.fillStyle = primaryGold;
            danceCtx.lineWidth = 6;
            danceCtx.lineCap = 'round';
            danceCtx.lineJoin = 'round';

            // Torso
            danceCtx.beginPath();
            danceCtx.moveTo(torso.start.x, torso.start.y);
            danceCtx.lineTo(torso.end.x, torso.end.y);
            danceCtx.stroke();
            
            // Head
            danceCtx.beginPath();
            danceCtx.arc(head.x, head.y, 20, 0, Math.PI * 2);
            danceCtx.fill();

            // Arms
            danceCtx.beginPath();
            danceCtx.moveTo(arms.left.p1.x, arms.left.p1.y);
            danceCtx.lineTo(arms.left.p2.x, arms.left.p2.y);
            danceCtx.lineTo(arms.left.p3.x, arms.left.p3.y);
            danceCtx.stroke();
            
            danceCtx.beginPath();
            danceCtx.moveTo(arms.right.p1.x, arms.right.p1.y);
            danceCtx.lineTo(arms.right.p2.x, arms.right.p2.y);
            danceCtx.lineTo(arms.right.p3.x, arms.right.p3.y);
            danceCtx.stroke();

            // Legs
            danceCtx.beginPath();
            danceCtx.moveTo(legs.left.p1.x, legs.left.p1.y);
            danceCtx.lineTo(legs.left.p2.x, legs.left.p2.y);
            danceCtx.lineTo(legs.left.p3.x, legs.left.p3.y);
            danceCtx.stroke();
            
            danceCtx.beginPath();
            danceCtx.moveTo(legs.right.p1.x, legs.right.p1.y);
            danceCtx.lineTo(legs.right.p2.x, legs.right.p2.y);
            danceCtx.lineTo(legs.right.p3.x, legs.right.p3.y);
            danceCtx.stroke();
        }

        function getPose(frame, speed) {
            const t = frame / speed;
            const sideSway = Math.sin(t) * 15;
            const headTilt = Math.sin(t) * 0.15;
            const legBend = Math.cos(t * 2) * 10;
            const armY = 130 + Math.sin(t) * 5;

            return {
                torso: {
                    start: { x: 150 + sideSway, y: 110 },
                    end: { x: 150, y: 190 },
                },
                head: {
                    x: 150 + sideSway * 1.2, y: 90 - Math.abs(sideSway / 2)
                },
                arms: {
                    left: {
                        p1: { x: 150 + sideSway, y: 125 },
                        p2: { x: 100, y: armY },
                        p3: { x: 50, y: 125 }
                    },
                    right: {
                        p1: { x: 150 + sideSway, y: 125 },
                        p2: { x: 200, y: armY },
                        p3: { x: 250, y: 125 }
                    }
                },
                legs: {
                    left: {
                        p1: { x: 150, y: 190 },
                        p2: { x: 110, y: 230 },
                        p3: { x: 90 - legBend, y: 270 }
                    },
                    right: {
                        p1: { x: 150, y: 190 },
                        p2: { x: 190, y: 230 },
                        p3: { x: 210 + legBend, y: 270 }
                    }
                }
            };
        }

        function animateDance() {
            if (!isDancing) return;
            frame++;
            const currentPose = getPose(frame, animationSpeed);
            drawDancer(currentPose);
            requestAnimationFrame(animateDance);
        }

        dancePlayBtn.addEventListener('click', () => {
            isDancing = !isDancing;
            dancePlayBtn.textContent = isDancing ? '❚❚' : '▶';
            if (isDancing) animateDance();
        });
        
        slowMoBtn.addEventListener('click', () => {
            animationSpeed = animationSpeed === 8 ? 16 : 8;
            slowMoBtn.textContent = animationSpeed === 16 ? 'Normal' : 'Slow';
        });

        // Initial pose
        drawDancer(getPose(0, animationSpeed)); 
    });
    </script>
</body>
</html>

